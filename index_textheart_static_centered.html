<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thinking of you ðŸ’œ</title>
  <style>
    :root{
      --pink:#ff4fb1;
      --pink-soft:rgba(255,79,177,.35);
      --bg:#000;
      --star:#b06cff;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);overflow:hidden;font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;}

    /* Background stars */
    .starfield{position:fixed;inset:0;pointer-events:none;overflow:hidden;}
    .star{position:absolute;width:6px;height:6px;background:var(--star);border-radius:2px;opacity:.75;filter:drop-shadow(0 0 10px rgba(176,108,255,.35));transform:rotate(45deg);}

    /* Center stage */
    .stage{position:fixed;inset:0;display:grid;place-items:center;}

    /* Heart + glow */
    .heart-wrap{position:relative;width:min(420px,72vw);aspect-ratio:1/1;display:grid;place-items:center;}
    .glow{position:absolute;inset:-18%;background:radial-gradient(circle at 50% 45%, rgba(176,108,255,.28), rgba(255,79,177,.12) 35%, transparent 68%);
      filter:blur(2px);}

    /* SVG text heart */
    svg{width:100%;height:100%;overflow:visible;}
    .heart-text{fill:var(--pink);font-size:14px;letter-spacing:2px;text-transform:lowercase;
      filter:drop-shadow(0 0 12px rgba(255,79,177,.55)) drop-shadow(0 0 28px rgba(255,79,177,.22));
    }

    /* Subtle pulse only when we add class */
    .pulseBeat{animation:pulseBeat 1.4s ease-in-out infinite;}
    @keyframes pulseBeat{0%,100%{transform:scale(1)}50%{transform:scale(1.045)}}

    /* Buttons + message */
    .ui{position:fixed;left:50%;top:60%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:10px;z-index:5;}
    .buttons{display:flex;gap:14px;align-items:center;justify-content:center;}
    button{padding:10px 18px;font-size:13px;background:rgba(0,0,0,.35);
      border:2px solid var(--pink);color:rgba(255,200,235,.95);
      border-radius:999px;cursor:pointer;letter-spacing:.2px;
      box-shadow:0 0 22px rgba(255,79,177,.12);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    button:hover{transform:translateY(-1px);box-shadow:0 0 26px rgba(255,79,177,.22)}
    button:active{transform:translateY(0px) scale(.98)}

    .hidden-message{min-height:22px;color:rgba(255,255,255,.88);font-size:14px;letter-spacing:.4px;text-align:center;
      text-shadow:0 0 12px rgba(255,79,177,.18);
      padding:0 14px;
    }

    .music-status{color:rgba(255,255,255,.6);font-size:11px;letter-spacing:.35px;min-height:14px}
    .now-playing{filter:drop-shadow(0 0 12px rgba(255,79,177,.45));}

    /* Polaroids layer */
    .polaroid-layer{position:fixed;inset:0;pointer-events:none;z-index:4;}
    .polaroid{position:absolute;width:130px;background:#fff;border-radius:10px;
      padding:10px 10px 16px;box-shadow:0 18px 40px rgba(0,0,0,.35);
      transform:translate(-50%,-50%) rotate(var(--rot,0deg));
      filter:drop-shadow(0 0 20px rgba(255,79,177,.12));
      animation:drift var(--dur,9s) ease-in-out infinite;
    }
    .polaroid::before{content:"";position:absolute;left:14px;top:6px;width:34px;height:12px;
      background:rgba(0,0,0,.08);border-radius:3px;transform:rotate(-10deg);
      filter:blur(.2px);}
    .polaroid img{display:block;width:100%;height:118px;object-fit:cover;border-radius:8px;}
    .caption{margin-top:8px;font-size:11px;color:#222;text-align:center;font-family:ui-monospace, SFMono-Regular, Menlo, monospace;}

    /* Gentle micro-movement but fixed placement */
    @keyframes drift{0%,100%{translate:0 0;}50%{translate:0 -8px;}}

    /* Hearts burst */
    .burst-heart{position:fixed;left:0;top:0;width:14px;height:14px;pointer-events:none;z-index:6;
      transform:translate(-50%,-50%);
      filter:drop-shadow(0 0 10px rgba(255,79,177,.45));
      animation:burst 1.1s ease-out forwards;
    }
    @keyframes burst{0%{opacity:0;transform:translate(-50%,-50%) scale(.6)}
      10%{opacity:1}
      100%{opacity:0;transform:translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.15)}}

    /* Responsive tweaks */
    @media (max-width:520px){
      .polaroid{width:112px}
      .polaroid img{height:104px}
      .heart-text{font-size:12px}
      .ui{top:62%}
    }
  </style>
</head>
<body>
  <div class="starfield" id="starfield"></div>

  <div class="polaroid-layer" id="polaroidLayer" aria-label="memories"></div>

  <div class="stage">
    <div class="heart-wrap" id="heartWrap">
      <div class="glow"></div>

      <!-- Text follows the heart outline. No visible outline stroke, no rotation. -->
      <svg viewBox="0 0 200 200" aria-label="love heart">
        <defs>
          <!-- Heart path (centered in viewBox) -->
          <path id="heartPath" d="M100 168
            C 62 141, 28 112, 28 78
            C 28 52, 47 36, 68 36
            C 83 36, 94 45, 100 54
            C 106 45, 117 36, 132 36
            C 153 36, 172 52, 172 78
            C 172 112, 138 141, 100 168 Z"/>
        </defs>

        <text class="heart-text">
          <textPath id="heartTextPath" href="#heartPath" startOffset="0%"></textPath>
        </text>
      </svg>
    </div>
  </div>

  <div class="ui">
    <div class="buttons">
      <button id="missBtn">Press if you miss me ðŸ’Œ</button>
      <button id="hugBtn">Press if you need a hug ðŸ’—</button>
      <button id="musicBtn">Play music ðŸŽ¶</button>
    </div>
    <div class="hidden-message" id="message">you will always be the one i love, forever and ever. ðŸ’—</div>
    <div class="music-status" id="musicStatus"></div>
  </div>

  <audio id="bgm" preload="auto" loop src="forever-lady-of-soul.mp3"></audio>

  <script>
    // ===== Stars =====
    (function makeStars(){
      const field = document.getElementById('starfield');
      const count = 95;
      const w = window.innerWidth;
      const h = window.innerHeight;
      field.innerHTML = '';
      for(let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className = 'star';
        const x = Math.random()*w;
        const y = Math.random()*h;
        const size = 3 + Math.random()*5;
        s.style.left = x+'px';
        s.style.top = y+'px';
        s.style.width = size+'px';
        s.style.height = size+'px';
        s.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
        field.appendChild(s);
      }
    })();

    // ===== Heart text: fill the path with repeating phrase (static, no rotation) =====
    const heartTextPath = document.getElementById('heartTextPath');
    const phrase = 'i love you â€¢ ';
    heartTextPath.textContent = phrase.repeat(36).trim();

    // ===== Polaroids (fixed positions, gentle drift) =====
    const photos = [
      'photo1.jpeg','photo2.jpeg','photo3.jpeg','photo4.jpeg','photo5.jpeg','photo6.jpeg',
      'photo7.jpeg','photo8.jpeg','photo9.jpeg','photo10.jpeg','photo11.jpeg','photo12.jpeg'
    ];
    const captions = [
      'my love ðŸ’—','always & forever','i love you','my favorite person',
      'My ladybug','Love you always','love you more','My happy place',
      "my heart's rest",'The one for me','The one i love','my world'
    ];

    // Spread around the center (percent positions), tuned to avoid UI overlap.
    const placements = [
      {x: 14, y: 18, r:-14, d:10},
      {x: 50, y: 14, r:  6, d:11},
      {x: 84, y: 18, r: 12, d:10},

      {x: 10, y: 40, r: -8, d:12},
      {x: 90, y: 42, r:  8, d:12},

      {x: 16, y: 70, r: -6, d:10},
      {x: 84, y: 74, r:  7, d:10},

      {x: 12, y: 88, r: -8, d:11},
      {x: 88, y: 86, r: 10, d:11},

      {x: 44, y: 90, r: -5, d:12},
      {x: 56, y: 90, r:  5, d:12},
      {x: 50, y: 98, r:  2, d:13},
    ];

    const layer = document.getElementById('polaroidLayer');
    layer.innerHTML = '';

    photos.forEach((src, i) => {
      const p = placements[i % placements.length];
      const wrap = document.createElement('div');
      wrap.className = 'polaroid';
      wrap.style.left = p.x + 'vw';
      wrap.style.top  = p.y + 'vh';
      wrap.style.setProperty('--rot', (p.r||0) + 'deg');
      wrap.style.setProperty('--dur', (p.d||10) + 's');

      const img = document.createElement('img');
      img.alt = captions[i] || 'memory';
      img.src = src;
      img.loading = 'eager';
      img.decoding = 'async';

      const cap = document.createElement('div');
      cap.className = 'caption';
      cap.textContent = captions[i] || '';

      wrap.appendChild(img);
      wrap.appendChild(cap);
      layer.appendChild(wrap);

      // If image fails to load, show a gentle placeholder (no missing polaroids).
      img.addEventListener('error', () => {
        img.style.background = '#f2f2f2';
        img.style.objectFit = 'contain';
      });
    });

    // ===== Buttons / messages =====
    const heartWrap = document.getElementById('heartWrap');
    const msgEl = document.getElementById('message');
    const missBtn = document.getElementById('missBtn');
    const hugBtn = document.getElementById('hugBtn');
    const musicBtn = document.getElementById('musicBtn');
    const bgm = document.getElementById('bgm');
    const musicStatus = document.getElementById('musicStatus');

    let typeTimer = null;
    let typeInterval = null;

    function typeTextStable(text){
      // Prevent "jumbled" text when clicking repeatedly.
      if(typeInterval) clearInterval(typeInterval);
      if(typeTimer) clearTimeout(typeTimer);
      msgEl.textContent = '';
      let i = 0;
      typeInterval = setInterval(() => {
        msgEl.textContent = text.slice(0, i++);
        if(i > text.length){
          clearInterval(typeInterval);
          typeInterval = null;
        }
      }, 18);
    }

    function pulseHeartOnce(){
      heartWrap.classList.add('pulseBeat');
      if(typeTimer) clearTimeout(typeTimer);
      typeTimer = setTimeout(() => heartWrap.classList.remove('pulseBeat'), 950);
    }

    function heartCenter(){
      const r = heartWrap.getBoundingClientRect();
      return { x: r.left + r.width/2, y: r.top + r.height/2 };
    }

    function spawnHeartsBurst(){
      const {x,y} = heartCenter();
      const n = 16;
      for(let i=0;i<n;i++){
        const h = document.createElement('div');
        h.className = 'burst-heart';
        h.style.left = x+'px';
        h.style.top = y+'px';
        const angle = Math.random()*Math.PI*2;
        const dist = 40 + Math.random()*90;
        const dx = Math.cos(angle)*dist;
        const dy = Math.sin(angle)*dist - 40;
        h.style.setProperty('--dx', dx.toFixed(1)+'px');
        h.style.setProperty('--dy', dy.toFixed(1)+'px');
        h.innerHTML = '<svg viewBox="0 0 24 24" width="14" height="14" aria-hidden="true"><path fill="'+getComputedStyle(document.documentElement).getPropertyValue('--pink').trim()+'" d="M12 21s-7.1-4.6-9.6-8.6C.3 8.9 2.2 5.6 5.7 5.2c1.8-.2 3.5.7 4.3 2 0 0 1.6-2.4 4.3-2 3.5.4 5.4 3.7 3.3 7.2C19.1 16.4 12 21 12 21z"/></svg>';
        document.body.appendChild(h);
        h.addEventListener('animationend', () => h.remove());
      }
    }

    missBtn.addEventListener('click', () => {
      pulseHeartOnce();
      typeTextStable("i miss you too... always ðŸ’—");
    });

    hugBtn.addEventListener('click', () => {
      pulseHeartOnce();
      spawnHeartsBurst();
      typeTextStable("sending you a big hug ðŸ¤");
    });

    let playing = false;
    musicBtn.addEventListener('click', async () => {
      try{
        if(!playing){
          // Required user gesture already satisfied by click.
          await bgm.play();
          playing = true;
          musicBtn.textContent = 'Pause music â¸ï¸';
          musicStatus.textContent = 'Now Playing';
          musicStatus.classList.add('now-playing');
          heartWrap.classList.add('pulseBeat');
        }else{
          bgm.pause();
          playing = false;
          musicBtn.textContent = 'Play music ðŸŽ¶';
          musicStatus.textContent = 'Paused';
          musicStatus.classList.remove('now-playing');
          heartWrap.classList.remove('pulseBeat');
        }
      }catch(e){
        musicStatus.textContent = 'Tap again to start music.';
      }
    });

    // Keep everything centered on resize
    window.addEventListener('resize', () => {
      // regen stars for better fit
      const field = document.getElementById('starfield');
      if(field) field.innerHTML='';
      (function makeStars(){
        const field = document.getElementById('starfield');
        const count = 95;
        const w = window.innerWidth;
        const h = window.innerHeight;
        for(let i=0;i<count;i++){
          const s = document.createElement('div');
          s.className = 'star';
          const x = Math.random()*w;
          const y = Math.random()*h;
          const size = 3 + Math.random()*5;
          s.style.left = x+'px';
          s.style.top = y+'px';
          s.style.width = size+'px';
          s.style.height = size+'px';
          s.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
          field.appendChild(s);
        }
      })();
    });
  </script>
</body>
</html>
