<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Happy valentines day Paris!!‚ù§Ô∏è</title>

<style>
  :root{
    --pink: #ff69b4;
    --pink2:#ff1493;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: #000;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    color: #fff;
    position: relative;
  }

  /* ===== Stylized twinkling stars (NO 'STAR' text) ===== */
  .starfield{
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }
  .star{
    position: absolute;
    width: var(--s, 18px);
    height: var(--s, 18px);
    opacity: 0.0;
    transform: translate3d(0,0,0) rotate(var(--r, 0deg));
    filter: drop-shadow(0 0 7px rgba(168,85,247,.32))
            drop-shadow(0 0 16px rgba(255,105,180,.16));
    animation:
      twinkle var(--tw, 2.6s) ease-in-out infinite,
      shimmer 6.5s ease-in-out infinite;
    animation-delay: var(--d, 0s);
  }
  .star svg{ width:100%; height:100%; display:block; }

  @keyframes twinkle{
    0%   { opacity: .08; transform: translate3d(0,0,0) rotate(var(--r,0deg)) scale(.92); }
    50%  { opacity: .92; transform: translate3d(0,0,0) rotate(var(--r,0deg)) scale(1.04); }
    100% { opacity: .12; transform: translate3d(0,0,0) rotate(var(--r,0deg)) scale(.96); }
  }
  @keyframes shimmer{
    0%,100% { filter: drop-shadow(0 0 7px rgba(168,85,247,.28)) drop-shadow(0 0 16px rgba(255,105,180,.12)); }
    50%     { filter: drop-shadow(0 0 9px rgba(255,105,180,.22)) drop-shadow(0 0 20px rgba(79,70,229,.16)); }
  }

  /* ===== Heart area ===== */
  .heart-wrap{
    position: relative;
    z-index: 2;
    display: grid;
    place-items: center;
    --pulseScale: 1;
    transform: scale(var(--pulseScale));
    transition: transform 80ms linear;
  }

  .glow {
    position: absolute;
    width: 540px;
    height: 540px;
    border-radius: 50%;
    background:
      radial-gradient(circle,
        rgba(255,105,180,.22) 0%,
        rgba(255,20,147,.12) 35%,
        rgba(255,255,255,.06) 55%,
        transparent 72%);
    filter: blur(7px);
    z-index: 1;
    transition: opacity .5s ease, filter .5s ease;
    opacity: 1;
  }

  body.playing .glow{
    filter: blur(8px);
    opacity: 1;
  }

  .heart {
    position: relative;
    width: 420px;
    height: 420px;
    z-index: 2;
  }

  .text {
    position: absolute;
    color: var(--pink);
    font-size: 17px;
    white-space: nowrap;
    letter-spacing: 0.5px;
    text-shadow:
      0 0 5px var(--pink),
      0 0 12px var(--pink2),
      0 0 18px rgba(255,255,255,.9);
    user-select: none;
    transform-origin: center;
    will-change: left, top, transform;
  }

  .buttons {
    margin-top: 16px;
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
    z-index: 2;
  }

  button {
    padding: 10px 18px;
    font-size: 15px;
    background: rgba(0,0,0,.35);
    border: 2px solid var(--pink);
    color: var(--pink);
    border-radius: 999px;
    cursor: pointer;
    transition: 0.25s ease;
    backdrop-filter: blur(4px);
  }

  button:hover {
    background: var(--pink);
    color: #000;
    box-shadow: 0 0 16px var(--pink);
  }

  /* "Now Playing" glow on the music button */
  body.playing #musicBtn{
    box-shadow:
      0 0 14px rgba(255,105,180,.55),
      0 0 34px rgba(255,20,147,.35);
  }
  body.playing #musicBtn::after{
    content: "  ‚Ä¢ Now Playing";
    font-size: 12px;
    opacity: .85;
  }

  .hidden-message {
    margin-top: 14px;
    font-size: 18px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 1.2s ease, transform 1.2s ease;
    text-align: center;
    min-height: 60px;
    z-index: 2;
    padding: 0 14px;
    max-width: 920px;
    line-height: 1.35;
  }

  .hidden-message.show { opacity: 1; transform: translateY(0); }

  .music-status{
    margin-top: 6px;
    font-size: 12px;
    opacity: .7;
    z-index: 2;
    text-align: center;
    padding: 0 14px;
    min-height: 16px;
  }

  .floating-heart {
    position: fixed;
    bottom: -20px;
    animation: floatUp 4s linear forwards;
    pointer-events: none;
    z-index: 3;
  }

  @keyframes floatUp {
    to { transform: translateY(-110vh); opacity: 0; }
  }

  .cursor::after {
    content: "‚ñã";
    margin-left: 4px;
    animation: blink 0.8s steps(1) infinite;
  }

  @keyframes blink { 50% { opacity: 0; } }

  @media (max-width: 480px){
    .glow { width: 440px; height: 440px; }
    .heart { width: 340px; height: 340px; }
    .text { font-size: 15px; }
  }
</style>
</head>

<body>
  <div class="starfield" id="starfield"></div>

  <div class="heart-wrap" id="heartWrap">
    <div class="glow"></div>
    <div class="heart" id="heart"></div>
  </div>

  <div class="buttons">
    <button id="missBtn">Press if you miss me üíå</button>
    <button id="hugBtn">Press if you need a hug üíó</button>
    <button id="musicBtn">Play music üé∂</button>
  </div>

  <div class="hidden-message" id="message"></div>
  <div class="music-status" id="musicStatus"></div>

  <audio id="bgm" preload="auto" loop src="forever-lady-of-soul.mp3"></audio>

<script>
  const STAR_SVG = `
  <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#c084fc"/>
        <stop offset="0.55" stop-color="#a855f7"/>
        <stop offset="1" stop-color="#7c3aed"/>
      </linearGradient>
      <linearGradient id="shine" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0" stop-color="rgba(255,255,255,0.0)"/>
        <stop offset="0.5" stop-color="rgba(255,255,255,0.35)"/>
        <stop offset="1" stop-color="rgba(255,255,255,0.0)"/>
      </linearGradient>
    </defs>

    <path d="M32 4
             L39.5 21.5
             L58 24
             L44 36.5
             L48 55.5
             L32 45.5
             L16 55.5
             L20 36.5
             L6 24
             L24.5 21.5
             Z"
          fill="url(#g)"
          stroke="rgba(255,255,255,0.22)"
          stroke-width="2"
          stroke-linejoin="round"/>

    <path d="M14 26 C22 18, 34 14, 50 18"
          fill="none"
          stroke="url(#shine)"
          stroke-width="4"
          stroke-linecap="round"
          opacity="0.9"/>

    <circle cx="22" cy="18" r="2" fill="rgba(255,255,255,0.7)"/>
  </svg>`;

  function rand(min, max){ return Math.random() * (max - min) + min; }

  const starfield = document.getElementById("starfield");
  const STAR_COUNT = 120;

  for(let i=0;i<STAR_COUNT;i++){
    const s = document.createElement("div");
    s.className = "star";
    s.innerHTML = STAR_SVG;

    const size = rand(10, 24);
    const left = rand(0, 100);
    const top  = rand(0, 100);
    const rot  = rand(-25, 25);
    const tw   = rand(1.6, 3.6);
    const delay= rand(0, 3.5);

    s.style.setProperty("--s", size + "px");
    s.style.left = left + "vw";
    s.style.top  = top + "vh";
    s.style.setProperty("--r", rot + "deg");
    s.style.setProperty("--tw", tw + "s");
    s.style.setProperty("--d", delay + "s");

    const driftX = rand(-10, 10);
    const driftY = rand(-10, 10);
    s.animate(
      [
        { transform: `translate3d(0,0,0) rotate(${rot}deg)` },
        { transform: `translate3d(${driftX}px, ${driftY}px, 0) rotate(${rot}deg)` }
      ],
      { duration: rand(9000, 16000), direction: "alternate", iterations: Infinity, easing: "ease-in-out" }
    );

    starfield.appendChild(s);
  }

  const heart = document.getElementById("heart");
  const message = document.getElementById("message");
  const heartWrap = document.getElementById("heartWrap");

  const phrase = "I love U";
  const points = 33;
  const scale  = 12;
  const speed  = 0.6;

  function getCenter(){
    const rect = heart.getBoundingClientRect();
    return { cx: rect.width/2, cy: rect.height/2 };
  }

  const nodes = [];
  for (let i = 0; i < points; i++) {
    const baseT = (i / points) * Math.PI * 2;
    const span = document.createElement("div");
    span.className = "text";
    span.innerText = phrase;
    heart.appendChild(span);
    nodes.push({ el: span, baseT });
  }

  function heartXY(t) {
    const x = 16 * Math.pow(Math.sin(t), 3);
    const y = -(13 * Math.cos(t)
              - 5 * Math.cos(2*t)
              - 2 * Math.cos(3*t)
              - Math.cos(4*t));
    return { x, y };
  }

  function heartDerivative(t) {
    const dx = 48 * Math.pow(Math.sin(t), 2) * Math.cos(t);
    const dy = 13 * Math.sin(t)
             - 10 * Math.sin(2*t)
             - 6 * Math.sin(3*t)
             - 4 * Math.sin(4*t);
    return { dx, dy };
  }

  let start = null;
  function animate(ts) {
    if (!start) start = ts;
    const time = (ts - start) / 1000;
    const c = getCenter();

    for (const n of nodes) {
      const t = n.baseT + time * speed;
      const p = heartXY(t);
      const d = heartDerivative(t);
      const angle = Math.atan2(d.dy, d.dx) * (180 / Math.PI);

      n.el.style.left = (c.cx + p.x * scale) + "px";
      n.el.style.top  = (c.cy + p.y * scale) + "px";
      n.el.style.transform = "translate(-50%, -50%) rotate(" + angle + "deg)";
    }

    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);

  function beatHeart() {
    const current = parseFloat(getComputedStyle(heartWrap).getPropertyValue("--pulseScale")) || 1;
    heartWrap.style.setProperty("--pulseScale", (current * 1.08).toFixed(3));
    setTimeout(() => heartWrap.style.setProperty("--pulseScale", current.toFixed(3)), 180);
  }

  function typeWriter(text, speedMs = 34) {
    message.innerHTML = "";
    message.classList.add("show", "cursor");

    let i = 0;
    function tick() {
      if (i < text.length) {
        message.innerHTML += text.charAt(i);
        i++;
        setTimeout(tick, speedMs);
      } else {
        message.classList.remove("cursor");
      }
    }
    tick();
  }

  function hugBurst(){
    for (let i = 0; i < 25; i++) {
      const floating = document.createElement("div");
      floating.className = "floating-heart";
      floating.innerText = "üíó";
      floating.style.left = Math.random() * 100 + "vw";
      floating.style.fontSize = (Math.random() * 18 + 16) + "px";
      floating.style.animationDuration = (Math.random() * 2 + 3) + "s";
      document.body.appendChild(floating);
      setTimeout(() => floating.remove(), 4500);
    }
  }

  // ===== Music + Pulse =====
  const bgm = document.getElementById("bgm");
  const musicBtn = document.getElementById("musicBtn");
  const musicStatus = document.getElementById("musicStatus");
  let musicReady = false;

  bgm.volume = 0.65;
  function setMusicStatus(txt){ musicStatus.textContent = txt || ""; }

  let audioCtx = null;
  let analyser = null;
  let dataArray = null;
  let pulseRAF = null;
  let smoothed = 0.0;

  function setupAnalyserOnce(){
    if (audioCtx) return;
    const ACtx = window.AudioContext || window.webkitAudioContext;
    audioCtx = new ACtx();
    const src = audioCtx.createMediaElementSource(bgm);
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 256;
    const gain = audioCtx.createGain();
    gain.gain.value = 1.0;
    src.connect(analyser);
    analyser.connect(gain);
    gain.connect(audioCtx.destination);
    dataArray = new Uint8Array(analyser.fftSize);
  }

  function startPulseLoop(){
    if (!analyser || pulseRAF) return;
    const BASE = 1.0;
    const MAX_BOOST = 0.055;

    const loop = () => {
      analyser.getByteTimeDomainData(dataArray);
      let sum = 0;
      for (let i = 0; i < dataArray.length; i++) {
        const v = (dataArray[i] - 128) / 128;
        sum += v * v;
      }
      const rms = Math.sqrt(sum / dataArray.length);
      smoothed = smoothed * 0.92 + rms * 0.08;

      const boost = Math.min(MAX_BOOST, smoothed * 0.35);
      heartWrap.style.setProperty("--pulseScale", (BASE + boost).toFixed(3));

      pulseRAF = requestAnimationFrame(loop);
    };

    pulseRAF = requestAnimationFrame(loop);
  }

  function stopPulseLoop(){
    if (pulseRAF) cancelAnimationFrame(pulseRAF);
    pulseRAF = null;
    heartWrap.style.setProperty("--pulseScale", "1");
  }

  async function tryStartMusic(){
    try {
      setMusicStatus("");
      setupAnalyserOnce();
      if (audioCtx && audioCtx.state === "suspended") await audioCtx.resume();

      bgm.load();
      await bgm.play();

      musicReady = true;
      document.body.classList.add("playing");
      musicBtn.textContent = "Pause music ‚è∏";
      setMusicStatus("Playing üé∂");
      startPulseLoop();
    } catch (e) {}
  }

  musicBtn.addEventListener("click", async () => {
    if (bgm.paused) {
      await tryStartMusic();
    } else {
      bgm.pause();
      document.body.classList.remove("playing");
      musicBtn.textContent = "Play music üé∂";
      setMusicStatus("Paused");
      stopPulseLoop();
    }
  });

  bgm.addEventListener("error", () => {
    setMusicStatus("Music file not loading ‚Äî make sure forever-lady-of-soul.mp3 is next to index.html.");
    document.body.classList.remove("playing");
    stopPulseLoop();
  });

  document.getElementById("missBtn").addEventListener("click", () => {
    beatHeart();
    typeWriter("you will always be the one i love, forever and ever. üíó", 34);
    if (!musicReady && bgm.paused) tryStartMusic();
  });

  document.getElementById("hugBtn").addEventListener("click", () => {
    beatHeart();
    hugBurst();
    if (!musicReady && bgm.paused) tryStartMusic();
  });
</script>

</body>
</html>
